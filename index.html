<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Baking Blog</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="./css/style.css">
	<script type="module">
		import { colorMode, createEntry, submitEntry, cancel, popupConfirmation } from './js/index.js'
		window.colorMode = colorMode;
		window.createEntry = createEntry;
		window.submitEntry = submitEntry;
		window.cancel = cancel;
		window.popupConfirmation = popupConfirmation;
	</script>
</head>

<body id="func">
	<header>
		<!-- <img class="logo" src="./img/logo.jpeg"> -->
		<h1 class="title">Baking Blog</h1>
		<button onclick="colorMode()" class="colorMode">Change Color Mode</button>
		<button onclick="createEntry()" class="colorMode"> New Entry </button>
	</header>
	<div>
		<h2>Welcome to the Baking Blog</h2>
	</div>
	<div>
		<div class="form-popup" id="form">
			<form class="form-container">
				<label for="blogEntry" class="blogTitle">Title: </label>
				<input type="text" placeholder="Title" id="blogTitle" name="blogTitle" required><br>
				<label for="blogEntry" class="blogEntry">Entry: </label><br>
				<textarea type="text"  placeholder="Blog Entry" id="blogEntry" name="blogEntry" required></textarea><br>
				<!--implement image saving in database -->
				<!-- <label for="blogImg" class="blogImg">Add Photo: </label>
				<input type="file" id="blogImg" name="blogImg"><br> -->
				<button class="submitBtn" onclick="submitEntry()">
					<a> Submit </a>
				</button>
				<button class="cancelBtn" onclick="cancel()">
					<a> Cancel </a>
				</button>
			</form>
		</div>
		<div>
			<ul>
				<section class="container">
					<script>
						const sqlite3 = require('sqlite3').verbose();
						// open the database
						let db = new sqlite3.Database('./db/chinook.db');
						db.all("SELECT * FROM blog ORDER BY date",
							(error, rows) => {
								if (err) {throw err;}
								rows.forEach( row => {document.write(`Title: ${ row.title}`);})
							});
						db.close();
					</script>
					<h4><Script>
						echo(title[i]);
					</Script></h4>
					<h4><Script>
						echo(entry[i]);
					</Script></h4>
					<div class="buttons">
						<button onclick="popupConfirmation()" class="delete">Delete</button>
							<div class="popup" id="popup">
								<form class="popup-container">
									<label class="deleteOpt">Are you sure you want to delete this Entry?</label><br>
									<div class="buttons">
										<button class="yesBtn" onclick="deleteEntry()"> Yes </button>
										<button class="noBtn" onclick="cancel()"> No </button>
									</div>
								</form>
							</div>
						<button onclick="editEntry()" class="edit">Edit</button>
					</div>
				</section>
			</ul>
		</div>
	</div>
</body>

</html>